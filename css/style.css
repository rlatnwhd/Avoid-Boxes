canvas {
    display: block;
    margin: 20px auto;
    background-color: #f2f2f2;
    border: 1px solid black;
}

:root{
  /* Light theme */
  --bg0:#f6f7fb;
  --bg1:#f1f3f9;
  --bg2:#e9eef7;
  --fg:#1c1f28;
  --fg-dim:#6b7280;
  --accent:#111;
  --accent-2:#111;
  --danger:#ef476f;

  --panel:#ffffffcc;
  --bezel-edge:#e3e7ee;
  --pill:#fff;
  --shadow: 0 10px 30px rgba(17,17,17,.06);

  --scale: 1;
  --stretchX: 1.06; /* 가로로 살짝 넓혀보이게(로직 영향 없음) */
}

/* 페이지 스크롤 금지 */
html,body{
  height:100%;
  margin:0;
  overflow:hidden;
  color:var(--fg);
  background: linear-gradient(180deg, var(--bg1), var(--bg0) 60%, var(--bg2) 100%);
  font-family:"Pretendard",-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Arial,sans-serif;
}

.viewport{ height:100dvh; display:flex; flex-direction:column; gap:16px; padding:16px; }

/* 그리드 자체를 가운데 정렬 */
.layout{
  flex:1; min-height:0;
  display:grid;
  grid-template-columns: 280px 1fr 280px;
  gap:16px;
  align-items:start;
  max-width: 1280px;       /* 중앙 고정 폭 */
  margin: 0 auto;          /* 가운데 정렬 */
}

.side-panel{ min-height:0; max-height:100%; overflow:auto; }

.side-panel .card{
  background:var(--panel);
  border:1px solid #e6eaf2;
  border-radius:12px;
  padding:16px;
  box-shadow: var(--shadow);
}

.card h2{ margin:0 0 10px; font-size:14px; color:var(--accent); font-weight:700; letter-spacing:.02em; }
.card p, .card li{ color:var(--fg-dim); font-size:14px; line-height:1.6 }
.card.muted{ opacity:.9 }
.hint{ margin:8px 0 0; padding-left:18px }

/* 상단 바: 시간 크게 */
.stage-topbar{ width:100%; max-width:720px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap; }
.pill{
  display:flex; gap:10px; align-items:center; padding:10px 14px;
  background:var(--pill);
  border:1px solid #e6eaf2;
  border-radius:999px;
  box-shadow: 0 6px 18px rgba(17,17,17,.06);
}
.pill span{ color:#8892a6; font-size:13px }
.pill strong{ color:#111; font-weight:800; font-size:16px } /* 크기 ↑ */
.pill.soft{ background:#fff; border-color:#dfe4ee }

/* 무적 배지 */
.pill.inv{
  background: linear-gradient(180deg,#fff7cc,#ffef7a);
  border-color:#f2d74f;
  box-shadow: 0 6px 18px rgba(255,210,0,.25);
}
.pill.inv span{ color:#a07300; }
.pill.inv strong{ color:#5c4300; font-weight:900 }

/* 얇은 베젤 + 하단/측면 삐져나옴 방지 */
#game-stage{
  --bezel-pad: 6px;
  position:relative;
  display:flex;
  align-items:center;     /* 세로 가운데로 → 위/아래 하얀 여백 두께 동일 */
  justify-content:center;
  padding:var(--bezel-pad);
  border-radius:12px;
  background: linear-gradient(180deg, #fff, #f7f9fc);
  border:1px solid var(--bezel-edge);
  box-shadow: var(--shadow);
  overflow:hidden;
}

/* 캔버스 */
#gameCanvas{
  width:100%; height:100%; display:block;
  image-rendering: pixelated; image-rendering: crisp-edges;
  background:#f6f8fd;
  border:none;                 /* 전역 canvas 보더 무시(검은 선 제거) */
  border-radius:10px;
  box-shadow: inset 0 0 20px rgba(17,17,17,.06);
}

/* 버튼 */
.btn{ border:none; border-radius:10px; padding:10px 14px; font-weight:700; color:#111; cursor:pointer;
  transition:.15s transform ease,.15s filter ease;
  background:linear-gradient(180deg,#fff,#f0f3fa); border:1px solid #e6eaf2; box-shadow:0 6px 18px rgba(17,17,17,.06);
}
.btn:hover{ transform:translateY(-1px) }
.btn:active{ transform:translateY(0) scale(.98) }
.btn.primary{ background:linear-gradient(180deg,#faffcc,#fff48a); border-color:#f2e35a; box-shadow:0 6px 18px rgba(255,212,0,.2) }
.btn.wide{ width:100% }

/* 카운트다운 오버레이 */
.countdown{
  position:absolute; inset:0;
  display:flex; align-items:center; justify-content:center;
  font-weight:900; color:#111;
  font-size: clamp(56px, 8vw, 96px);   /* 숫자 크게 */
  letter-spacing:.02em;
  text-shadow: 0 6px 18px rgba(17,17,17,.08);
  pointer-events:none;
}
.countdown.hidden{ display:none }
/* 배경 없앰: .countdown .bubble 스타일 및 관련 배경/테두리 제거 */

/* 중앙 카운트다운: 무적용(진한 노랑) */
.countdown.inv{
  color:#e8b400;                     /* 진한 노랑 */
  text-shadow: 0 6px 24px rgba(232,180,0,.45);
  font-weight:900;
}

@media (max-width:1100px){
  .layout{ grid-template-columns:1fr; max-width: 720px; }
  .side-panel.left,.side-panel.right{ order:2 }
  .stage-wrap{ order:1 }
  .hide-sm{ display:none }
}

/* Windows 스크롤바 */
*{ scrollbar-width:thin; }
*::-webkit-scrollbar{ height:8px; width:8px }
*::-webkit-scrollbar-thumb{ background:#d7ddea; border-radius:999px }